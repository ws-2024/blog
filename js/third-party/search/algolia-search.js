document.addEventListener("DOMContentLoaded",()=>{const{indexName:e,appID:t,apiKey:a,hits:r}=CONFIG.algolia;const s=algoliasearch(t,a);const c=s.initIndex(e);const n=document.querySelector(".search-input");const l=document.querySelector(".search-result-container");const o=e=>{const{title:t,excerpt:a,excerptStrip:s,contentStripTruncate:n}=e._highlightResult;let i=`<li><a href="${e.permalink}" class="search-result-title">${t.value}</a>`;const r=a||s||n;if(r&&r.value){const c=document.createElement("div");c.innerHTML=r.value;i+=`<a href="${e.permalink}"><p class="search-result">${c.textContent.substring(0,100)}...</p></a></li>`}return i};let u=false;let d=null;const p=async(a,s=0)=>{if(u){d={searchText:a,page:s};return}u=true;const e=Date.now();const n=await c.search(a,{page:s,attributesToRetrieve:["permalink"],attributesToHighlight:["title","excerpt","excerptStrip","contentStripTruncate"],hitsPerPage:r.per_page||10,highlightPreTag:'<mark class="search-keyword">',highlightPostTag:"</mark>"});if(n.nbHits===0){l.innerHTML='<div class="search-result-icon"><i class="far fa-frown fa-5x"></i></div>'}else{const i=CONFIG.i18n.hits_time.replace("${hits}",n.nbHits).replace("${time}",Date.now()-e);let t="";if(n.nbPages>1){t+='<nav class="pagination algolia-pagination">';for(let e=0;e<n.nbPages;e++){if(e===s){t+=`<span class="page-number current">${e+1}</span>`}else{t+=`<a class="page-number" href="#" data-index=${e}>${e+1}</a>`}}t+="</nav>"}l.innerHTML=`<div class="search-stats">
          <span>${i}</span>
          <img src="${CONFIG.images}/logo-algolia-nebula-blue-full.svg" alt="Algolia">
        </div>
        <hr>
        <ul class="search-result-list">${n.hits.map(o).join("")}</ul>
        ${t}`;if(typeof pjax==="object")pjax.refresh(l);l.querySelectorAll(".page-number").forEach(t=>{t.addEventListener("click",async e=>{e.preventDefault();await p(a,Number(t.dataset.index))})})}u=false;if(d!==null&&(d.searchText!==a||d.page!==s)){const{searchText:a,page:s}=d;d=null;p(a,s)}};const i=async()=>{const e=n.value.trim();if(e===""){l.innerHTML='<div class="search-result-icon"><i class="fab fa-algolia fa-5x"></i></div>';return}await p(e,0)};const h=NexT.utils.debounce(i,500);n.addEventListener("input",h);document.querySelectorAll(".popup-trigger").forEach(e=>{e.addEventListener("click",()=>{document.body.classList.add("search-active");setTimeout(()=>n.focus(),500)})});const g=()=>{document.body.classList.remove("search-active")};document.querySelector(".search-pop-overlay").addEventListener("click",e=>{if(e.target===document.querySelector(".search-pop-overlay")){g()}});document.querySelector(".popup-btn-close").addEventListener("click",g);document.addEventListener("pjax:success",g);window.addEventListener("keydown",e=>{if((e.ctrlKey||e.metaKey)&&e.key==="k"){e.preventDefault();document.body.classList.add("search-active");setTimeout(()=>n.focus(),500)}});window.addEventListener("keyup",e=>{if(e.key==="Escape"){g()}})});